<?xml version="1.0" encoding="UTF-8"?>
<openbox_menu xmlns="http://openbox.org/3.4/menu">

  <menu id="apps-menu" label="Applications">
    <item label="Terminal">
      <action name="Execute">
        <command>xterm -fa 'Monospace' -fs 11</command>
      </action>
    </item>
    <item label="File Manager (mc)">
      <action name="Execute">
        <command>xterm -e mc ~ /</command>
      </action>
    </item>
    <item label="Firefox">
      <action name="Execute">
        <command>/usr/bin/firefox</command>
      </action>
    </item>
  </menu>

  <menu id="settings-menu" label="Settings">
    <item label="Change Wallpaper">
      <action name="Execute">
        <command>xterm -T "Wallpaper Changer" -fa 'Monospace' -fs 11 -e /usr/bin/marux-wallpaper</command>
      </action>
    </item>
    <item label="Display Info">
      <action name="Execute">
        <command>xterm -T "Display" -fa 'Monospace' -fs 11 -e sh -c "xrandr; echo ''; echo 'Press Enter to close'; read"</command>
      </action>
    </item>
    <item label="Network Settings">
      <action name="Execute">
        <command>xterm -T "Network" -fa 'Monospace' -fs 11 -e nmtui</command>
      </action>
    </item>
    <item label="Volume Control">
      <action name="Execute">
        <command>xterm -T "Volume" -fa 'Monospace' -fs 11 -e alsamixer</command>
      </action>
    </item>
  </menu>

  <menu id="system-menu" label="System">
    <item label="System Info (neofetch)">
      <action name="Execute">
        <command>xterm -T "System Info" -fa 'Monospace' -fs 11 -e sh -c "neofetch; echo ''; echo 'Press Enter to close'; read"</command>
      </action>
    </item>
    <item label="Task Manager (top)">
      <action name="Execute">
        <command>xterm -T "Task Manager" -fa 'Monospace' -fs 11 -e top</command>
      </action>
    </item>
    <item label="Korean Input Diagnostics">
      <action name="Execute">
        <command>xterm -T "Hangul Diag" -fa 'Monospace' -fs 11 -e sh -c "cat /tmp/hangul-diag.log 2>/dev/null || echo 'No diagnostics log found'; echo ''; echo 'Press Enter to close'; read"</command>
      </action>
    </item>
  </menu>

  <!-- Root menu (right-click on desktop) -->
  <menu id="root-menu" label="MaruxOS">
    <item label="Terminal">
      <action name="Execute">
        <command>xterm -fa 'Monospace' -fs 11</command>
      </action>
    </item>
    <item label="File Manager">
      <action name="Execute">
        <command>xterm -e mc ~ /</command>
      </action>
    </item>
    <item label="Firefox">
      <action name="Execute">
        <command>/usr/bin/firefox</command>
      </action>
    </item>
    <separator/>
    <menu id="new-menu" label="New">
      <item label="Folder">
        <action name="Execute">
          <command>xterm -T "New Folder" -fa 'Monospace' -fs 11 -e /usr/bin/marux-new-desktop-item folder</command>
        </action>
      </item>
      <item label="Text File">
        <action name="Execute">
          <command>xterm -T "New File" -fa 'Monospace' -fs 11 -e /usr/bin/marux-new-desktop-item text</command>
        </action>
      </item>
      <item label="Script (.sh)">
        <action name="Execute">
          <command>xterm -T "New Script" -fa 'Monospace' -fs 11 -e /usr/bin/marux-new-desktop-item script</command>
        </action>
      </item>
    </menu>
    <item label="Open Desktop Folder">
      <action name="Execute">
        <command>xterm -e mc ~/Desktop /</command>
      </action>
    </item>
    <item label="Refresh Desktop">
      <action name="Execute">
        <command>sh -c "/usr/bin/marux-desktop-refresh; killall idesk 2>/dev/null; sleep 0.3; idesk &amp;"</command>
      </action>
    </item>
    <separator/>
    <menu id="apps-menu"/>
    <menu id="settings-menu"/>
    <menu id="system-menu"/>
    <separator/>
    <item label="Reconfigure">
      <action name="Reconfigure"/>
    </item>
    <separator/>
    <item label="Log Out">
      <action name="Exit"/>
    </item>
    <item label="Reboot">
      <action name="Execute">
        <command>reboot</command>
      </action>
    </item>
    <item label="Shutdown">
      <action name="Execute">
        <command>poweroff</command>
      </action>
    </item>
  </menu>

</openbox_menu>
